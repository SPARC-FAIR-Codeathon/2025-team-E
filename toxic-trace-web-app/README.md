# toxic-trace

Toxic trace is a fork of abi-software/mapintegratedvuer focusing on using the UI and tools created there to make a platform for learning about toxins in the human body



# Technical Details


## Database generation

Database search goes through a lot of files generated by our team during the codeathon.

The data is originally generated as google sheets documents, then is converted into json for better heirchy to be used on the front end.

## Database filtering

When generating the json version of the document, a short descriptive name is also provided to filter across that table. We will call this `categorisation`.

Each database has `categorisation`, which can be used as a filter, but additionally each row is searched for the following to make the content in the table filterable and interactive

#### *Finding filters in the tables*
Table coloumnns are provided as locations to search over. For each row, on this coloumn we do attempt a text match with the systems and components from `bodySytemComponents.json` 

`bodySytemComponents.json` contains the heirchy of each organ in its system:

_bodySystemComponents.json_
```yaml
[
  {
    system: "cardiovascular",
    components: [
      "heart",
      "aorta",
      #....
    ]
  },
  {
    system: "respiratory",
    components: [
      "lungs",
      "trachea",
      #....
    ]
  }
]
```

If matches are found, they are logged for the next step:

#### *Filtering creation*

If there is a match on the system or its components, a `filters` field is added to the json containing the system and its components like so:

```yaml
filters: [
  {
    system: "cardiovascular",
    components: ["lung"]
  },
  # more if required
]
```

We then run a script to combine all the tables into a single json file. The `categorisation` is kept so we know how to display the data

### User interactions from map

Now that we have filtering, if a user selects `lung`, we can trigger the filtering on the sidebar to pull up relevant dataset cards for it